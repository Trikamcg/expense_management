<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Expense Management System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="style.css" rel="stylesheet" />
</head>
<body>
  <div class="container my-4">
    <!-- Dark Mode Toggle Button -->
    <div class="d-flex justify-content-end mb-4">
      <button id="mode-toggle" class="btn btn-outline-primary d-flex align-items-center" aria-label="Toggle Dark Mode">
        <i id="mode-icon" class="fa-solid fa-moon me-2" aria-hidden="true"></i> Dark Mode
      </button>
    </div>

    <!-- Main Heading -->
    <h1 class="text-center mb-4 display-4 text-primary">Expense Management System</h1>

    <!-- Alert placeholder -->
    <div id="alert-placeholder" aria-live="polite"></div>

    <!-- Authentication section -->
    <section id="auth-section" class="card p-4 shadow-sm mb-4 rounded" aria-label="Login Form">
      <form id="authForm" class="row g-3 justify-content-center" novalidate>
        <div class="col-md-5">
          <label for="auth-username" class="form-label visually-hidden">Username</label>
          <input type="text" id="auth-username" class="form-control" placeholder="Username" required aria-describedby="auth-username-error" aria-required="true" />
          <div id="auth-username-error" class="invalid-feedback">Please enter your username</div>
        </div>
        <div class="col-md-5">
          <label for="auth-password" class="form-label visually-hidden">Password</label>
          <input type="password" id="auth-password" class="form-control" placeholder="Password" required aria-describedby="auth-password-error" aria-required="true" />
          <div id="auth-password-error" class="invalid-feedback">Please enter your password</div>
        </div>
        <div class="col-md-2 d-grid">
          <button type="submit" class="btn btn-primary" aria-label="Login">Login</button>
        </div>
        <div class="col-md-2 d-grid">
          <a href="signup.html" class="btn btn-outline-secondary" aria-label="Sign Up">Sign Up</a>
        </div>
      </form>
    </section>

    <!-- Dashboard section (hidden initially) -->
    <section id="dashboard-section" class="card p-4 shadow-sm" style="display:none;" aria-label="User Dashboard">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div><i class="fa-solid fa-user"></i> <strong id="display-username">User</strong> (<span id="role-display" class="text-capitalize">employee</span>)</div>
        <button class="btn btn-sm btn-danger" onclick="logout()" aria-label="Logout">
          Logout <i class="fa-solid fa-arrow-right-from-bracket" aria-hidden="true"></i>
        </button>
      </div>

      <!-- Add Expense Form -->
      <section class="mb-4 p-3 bg-light rounded" aria-label="Add New Expense Form">
        <h4>Add New Expense</h4>
        <form id="expense-form" class="row g-3" novalidate>
          <div class="col-md-4">
            <label for="exp-desc" class="form-label visually-hidden">Description</label>
            <input type="text" id="exp-desc" class="form-control" placeholder="Description" required aria-required="true" />
            <div class="invalid-feedback">Please enter description</div>
          </div>
          <div class="col-md-3">
            <label for="exp-amount" class="form-label visually-hidden">Amount</label>
            <input type="number" id="exp-amount" class="form-control" placeholder="Amount" min="1" required aria-required="true" />
            <div class="invalid-feedback">Please enter a valid amount</div>
          </div>
          <div class="col-md-3">
            <label for="exp-category" class="form-label visually-hidden">Category</label>
            <select id="exp-category" class="form-select" required aria-required="true">
              <option disabled selected value="">Select Category</option>
              <option>Travel</option>
              <option>Meals</option>
              <option>Office</option>
              <option>Entertainment</option>
              <option>Miscellaneous</option>
            </select>
            <div class="invalid-feedback">Please select category</div>
          </div>
          <div class="col-md-2">
            <label for="exp-date" class="form-label visually-hidden">Date</label>
            <input type="date" id="exp-date" class="form-control" required aria-required="true" />
            <div class="invalid-feedback">Please select date</div>
          </div>
          <div class="col-12 d-grid mt-3">
            <button class="btn btn-success" type="submit" aria-label="Add Expense">Add Expense</button>
          </div>
        </form>
      </section>

      <!-- Expense History and Pending Approvals -->
      <div class="row g-3">
        <section class="col-md-6" aria-label="Expense History">
          <h4>Expense History</h4>
          <!-- Search input added here -->
          <input type="text" id="expense-search" placeholder="Search expenses..." class="form-control mb-3" aria-label="Search expenses" />

          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead class="table-primary">
                <tr>
                  <th>Description</th>
                  <th>Category</th>
                  <th>Amount</th>
                  <th>Date</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="history-list"></tbody>
            </table>
          </div>

          <!-- Pagination controls added here -->
          <nav aria-label="Expense history page navigation">
            <ul class="pagination" id="pagination"></ul>
          </nav>
        </section>
        <section class="col-md-6" aria-label="Pending Approvals">
          <h4>Pending Approvals</h4>
          <div class="table-responsive">
            <table class="table table-bordered">
              <thead class="table-primary">
                <tr>
                  <th>Description</th>
                  <th>Category</th>
                  <th>Amount</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="approval-list"></tbody>
            </table>
          </div>
        </section>
      </div>

      <!-- Summary Cards -->
      <div class="row text-center mt-4" role="region" aria-label="Expense Summary">
        <div class="col-md-4">
          <div class="card bg-light">
            <div class="card-body">
              <h5>Total Expenses</h5>
              <h3 id="sum-total">₹0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card bg-success text-white">
            <div class="card-body">
              <h5>Approved</h5>
              <h3 id="sum-approved">₹0</h3>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card bg-danger text-white">
            <div class="card-body">
              <h5>Rejected</h5>
              <h3 id="sum-rejected">₹0</h3>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="main.js"></script>
</body>
</html>
